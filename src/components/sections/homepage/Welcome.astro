---
import { Image } from 'astro:assets'
import background from '../../../assets/images/home/hero_home.webp'
import BookingButton from '../../common/BookingButton.astro'
import searchIcon from '../../../assets/icons/recherche.svg'
import reservationIcon from '../../../assets/icons/reservation.svg'
import logo from '../../../assets/logo.webp'
import trio from '../../../assets/images/home/trio.webp'
import Header from '../../layout/Header.astro'
---

<div class="relative w-full h-screen overflow-hidden bg-white">
    <!-- Image de fond en couleur originale, sans effet -->
    <Image
        src={background}
        alt="Terracan prestige"
        fetchpriority="high"
        class="absolute inset-0 w-full h-full object-cover"
    />

    <!-- Contenu principal au-dessus de lâ€™image -->
    <main
        class="relative z-10 flex items-center justify-center h-full text-white"
    >
        <!-- Logo prestige -->
        <Image
            src={logo}
            alt="Terracan prestige"
            fetchpriority="high"
            class="absolute lg:top-12 top-3 lg:left-24 left-3 w-24 h-24 object-contain"
        />

        <!-- Toggle button for mobile menu  -->
        <div
            id="menu-toggle"
            class="flex flex-col cursor-pointer absolute top-12 right-10 gap-1 w-10 h-10 lg:hidden z-50"
        >
            <span class="line w-full bg-black h-1 transition duration-300"
            ></span>
            <span class="line w-full bg-black h-1 transition duration-300"
            ></span>
            <span class="line w-full bg-black h-1 transition duration-300"
            ></span>
        </div>

        <!-- Desktop nav -->
        <div
            class="hidden lg:block absolute top-10 left-1/2 transform -translate-x-1/2 -translate-y-1/2"
        >
            <Header />
        </div>

        <!-- Mobile menu panel -->
        <ul
            id="mobile-menu"
            class="fixed top-0 right-[-100%] w-full h-screen bg-primary text-white flex flex-col items-center justify-center gap-5 text-2xl transition-all duration-300 lg:hidden z-40"
        >
            <li><a href="/"> Home </a></li>
            <li><a href="/#about-us"> About Us </a></li>
            <li><a href="/#tours"> Tours & Stays </a></li>
            <li><a href="/car-rental"> Car Rental </a></li>
        </ul>

        <!-- Contenu principal -->
        <div class="space-y-8 max-w-xl mx-auto lg:mt-24 lg:ml-24 ml-8">
            <h1 class="text-5xl font-bold text-start leading-tight">
                Welcome to <br /> Prestige Travel <br /> Madagascar
            </h1>
            <p class="">
                We specialize in authentic and naturalist tours in the southern
                region of Madagascar. Experience an immersive journey through
                nature, culture, and adventure.
            </p>
            <!-- Explore button -->
            <div class="flex lg:justify-start justify-center">
                <BookingButton
                    label="Explore"
                    icon={searchIcon.src}
                    iconAlt="Reservation icon"
                    className="mt-0"
                    href="/#tours"
                />
            </div>
        </div>

        <!-- Booking button -->
        <div class="hidden lg:block absolute top-12 right-24">
            <BookingButton
                label="Booking"
                icon={reservationIcon.src}
                iconAlt="Reservation icon"
                href="/car-rental#booknow"
            />
        </div>

        <Image
            src={trio}
            alt="Terracan prestige"
            fetchpriority="high"
            class="hidden lg:block absolute bottom-0 right-0 w-md h-auto object-contain"
        />
    </main>
</div>

<!-- JS script for menu toggle -->
<script>
    const toggle = document.getElementById('menu-toggle')
    const menu = document.getElementById('mobile-menu')

    if (toggle && menu) {
        const lines = toggle.querySelectorAll('.line')

        toggle.addEventListener('click', () => {
            const isOpen = menu.classList.contains('right-0')

            // Toggle visibility
            menu.classList.toggle('right-0')
            menu.classList.toggle('right-[-100%]')

            // Animate the lines (turn into X)
            lines[0].classList.toggle('rotate-45')
            lines[0].classList.toggle('absolute')
            lines[0].classList.toggle('top-1/2')

            lines[1].classList.toggle('opacity-0')
            lines[1].classList.toggle('absolute')
            lines[1].classList.toggle('top-1/2')

            lines[2].classList.toggle('-rotate-45')
            lines[2].classList.toggle('absolute')
            lines[2].classList.toggle('top-1/2')
        })

        // Close menu when clicking on a link
        document.querySelectorAll('#mobile-menu a').forEach((link) => {
            link.addEventListener('click', () => {
                menu.classList.remove('right-0')
                menu.classList.add('right-[-100%]')
                lines.forEach((line) => {
                    line.classList.remove(
                        'rotate-45',
                        '-rotate-45',
                        'absolute',
                        'top-1/2',
                        'opacity-0'
                    )
                })
            })
        })
    }
</script>
